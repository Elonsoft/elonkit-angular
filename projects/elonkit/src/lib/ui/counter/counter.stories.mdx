import { Meta, Story, Props } from '@storybook/addon-docs/blocks';
import { Preview } from '~storybook/components';

import { withA11y } from '@storybook/addon-a11y';
import { action } from '@storybook/addon-actions';
import { withKnobs, text } from '@storybook/addon-knobs';

import { BrowserAnimationsModule } from '@angular/platform-browser/animations';

import { ESCounterModule } from './counter.module';
import { CounterComponent } from './counter.component';

import { COUNTER_STORY_ADDONS_SOURCE } from './__stories__/counter-story-addons';
import { COUNTER_STORY_BASIC_SOURCE } from './__stories__/counter-story-basic';
import {
  CounterStoryContainerModule,
  COUNTER_STORY_CONTAINER_SOURCE
} from './__stories__/counter-story-container';

<Meta title='UI/Counter' decorators={[withA11y, withKnobs]} />

# Counter

This component demonstrates usage of storybook.

## Demos

This is a basic story:

<Preview source={COUNTER_STORY_BASIC_SOURCE}>
  <Story name='Basic' height='170px'>
    {{
      template: `<es-counter></es-counter>`,
      moduleMetadata: {
        imports: [BrowserAnimationsModule, ESCounterModule]
      }
    }}
  </Story>
</Preview>

We can use `knobs` and `actions` addons to work with inputs and outputs:

<Preview source={COUNTER_STORY_ADDONS_SOURCE}>
  <Story name='With addons' height='170px'>
    {{
      template: `<es-counter [heading]="heading" (increase)="onIncrease($event)"></es-counter>`,
      moduleMetadata: {
        imports: [BrowserAnimationsModule, ESCounterModule]
      },
      props: {
        heading: text('heading', 'Counter With Addons'),
        onIncrease: action('onIncrease')
      }
    }}
  </Story>
</Preview>

This is an example of a component wraped into a container component, which overrides some styles of nested component.

<Preview source={COUNTER_STORY_CONTAINER_SOURCE}>
  <Story name='With container' height='170px'>
    {{
      template: `<es-counter-story-container></es-counter-story-container>`,
      moduleMetadata: {
        imports: [CounterStoryContainerModule]
      }
    }}
  </Story>
</Preview>

## API

<Props of={CounterComponent} />
