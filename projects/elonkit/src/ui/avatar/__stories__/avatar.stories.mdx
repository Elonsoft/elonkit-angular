import { Meta, Story, ArgsTable } from '@storybook/addon-docs/blocks';
import { Canvas } from '~storybook/components';
import { action } from '@storybook/addon-actions';

import { ESAvatarComponent, ESAvatarModule } from '..';

import {
  AvatarStoryBasicModule,
  AvatarStoryBasicComponent,
  AVATAR_STORY_BASIC_SOURCE
} from './avatar-story-basic';

import {
  AvatarStoryCustomModule,
  AvatarStoryCustomComponent,
  AVATAR_STORY_CUSTOM_SOURCE
} from './avatar-story-custom';

import {
  AvatarStoryTypographyModule,
  AvatarStoryTypographyComponent,
  AVATAR_STORY_TYPOGRAPHY_SOURCE
} from './avatar-story-typography';

import {
  AvatarStoryGroupModule,
  AvatarStoryGroupComponent,
  AVATAR_STORY_GROUP_SOURCE
} from './avatar-story-group';

import { AVATAR_STORY_ACTIONS_SOURCE } from './avatar-story-actions';

<Meta
  title='UI/Avatar'
  args={{
    formType: 'round',
    width: 60,
    height: 60,
    altText: 'alt text',
    borderRadius: 5,
    showStatus: false,
    statusWidth: 10,
    statusHeight: 10,
    statusBorderWidth: 2,
    statusBorderColor: '',
    defaultIconSrc: './assets/elonkit/avatar/seal.svg',
    statusSrc: ''
  }}
  argTypes={{
    formType: {
      control: { type: 'select', options: ['round', 'square'] }
    }
  }}
/>

# Avatar

This component allows to display default or custom avatar.

## Demos

We can use round or square avatar.

<Canvas source={AVATAR_STORY_BASIC_SOURCE}>
  <Story name='Basic'>
    {((args) => ({
      component: AvatarStoryBasicComponent,
      moduleMetadata: {
        imports: [AvatarStoryBasicModule]
      },
      props: {
        ...args
      }
    })).bind({})}
  </Story>
</Canvas>

We can use custom avatar and status icons.

<Canvas source={AVATAR_STORY_CUSTOM_SOURCE}>
  <Story name='Custom'>
    {((args) => ({
      component: AvatarStoryCustomComponent,
      moduleMetadata: {
        imports: [AvatarStoryCustomModule]
      },
      props: {
        ...args
      }
    })).bind({})}
  </Story>
</Canvas>

We can display user initials and change it's typography.

<Canvas source={AVATAR_STORY_TYPOGRAPHY_SOURCE}>
  <Story name='Typography'>
    {((args) => ({
      component: AvatarStoryTypographyComponent,
      moduleMetadata: {
        imports: [AvatarStoryTypographyModule]
      },
      props: {
        ...args
      }
    })).bind({})}
  </Story>
</Canvas>

We can group multiple avatars together.

<Canvas source={AVATAR_STORY_GROUP_SOURCE}>
  <Story name='Group'>
    {(() => ({
      component: AvatarStoryGroupComponent,
      moduleMetadata: {
        imports: [AvatarStoryGroupModule]
      }
    })).bind({})}
  </Story>
</Canvas>

We can add actions.

<Canvas source={AVATAR_STORY_ACTIONS_SOURCE}>
  <Story name='Actions'>
    {(() => ({
      template: `
        <es-avatar
          (click)="onClick()"
        ></es-avatar>
      `,
      moduleMetadata: {
        imports: [ESAvatarModule]
      },
      props: {
        onClick: action('onClick')
      }
    })).bind({})}
  </Story>
</Canvas>

## API

<ArgsTable of={ESAvatarComponent} />

## Interfaces

```ts
type ESAvatarForm = 'round' | 'square';
```

ESAvatarDefaultOptions ESAvatarForm defines default avatar form

```ts
interface ESAvatarDefaultOptions {
  avatarSrc?: string;
  height?: number;
  width?: number;
  altText?: string;
  borderRadius?: number;
  showStatus?: boolean;
  statusSrc?: string;
  statusWidth?: number;
  statusHeight?: number;
  statusBorderWidth?: number;
  textTypography?: string;
  formType?: ESAvatarForm;
  defaultIconSrc?: string;
}
```

Injection token that can be used to configure the default options for all components within an app.

```ts
import { ES_AVATAR_DEFAULT_OPTIONS } from '@elonsoft/elonkit/ui/avatar';

@NgModule({
  providers: [
    {
      provide: ES_AVATAR_DEFAULT_OPTIONS,
      useValue: {
        width: 200,
        height: 200,
        borderRadius: 48,
        formType: 'square'
      }
    }
  ]
})
```
